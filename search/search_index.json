{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home This package connects the bfabric system to the python and R world while providing a JSON and REST interface using Flask . The bfabricShiny R package is an extension and provides code snippets and sample implementation for a seamless R shiny bfabric integration. For more advanced users the bfabricPy package also provides a powerful query interface on the command-line though using the provided scripts. Please see below for how to install bfabricPy. Installation The package is not available on PyPI as of now, but can be installed directly from GitHub and a stable branch is available for your convenience. If you are only interested in running the command line scripts, installation with pipx is recommended as it will create a separate virtual environment for bfabricPy and make it possible to upgrade your installation later easily. pipx install \"git+https://github.com/fgcz/bfabricPy.git@stable\" Note that pipx is also useful in scripts, if you want to run a particular version without forcing the global installation of that version (simply replace \"stable\" with a tag of your chosing): pipx run --spec \"git+https://github.com/fgcz/bfabricPy.git@stable\" bfabric_read.py --help If you want to add it to a pyproject.toml the syntax for specifying a git dependency is as follows: [project] dependencies = [ \"bfabricPy @ git+https://github.com/fgcz/bfabricPy.git@stable\" ] Configuration Create a file as follows: (note: the password is not your login password, but the web service password available on your profile page) # ~/.bfabricpy.yml GENERAL: default_config: PRODUCTION PRODUCTION: login: yourBfabricLogin password: yourBfabricWebPassword base_url: https://fgcz-bfabric.uzh.ch/bfabric You can also include an additional config for the TEST instance TEST: login: yourBfabricLogin password: yourBfabricWebPassword base_url: https://fgcz-bfabric-test.uzh.ch/bfabric","title":"Home"},{"location":"#home","text":"This package connects the bfabric system to the python and R world while providing a JSON and REST interface using Flask . The bfabricShiny R package is an extension and provides code snippets and sample implementation for a seamless R shiny bfabric integration. For more advanced users the bfabricPy package also provides a powerful query interface on the command-line though using the provided scripts. Please see below for how to install bfabricPy.","title":"Home"},{"location":"#installation","text":"The package is not available on PyPI as of now, but can be installed directly from GitHub and a stable branch is available for your convenience. If you are only interested in running the command line scripts, installation with pipx is recommended as it will create a separate virtual environment for bfabricPy and make it possible to upgrade your installation later easily. pipx install \"git+https://github.com/fgcz/bfabricPy.git@stable\" Note that pipx is also useful in scripts, if you want to run a particular version without forcing the global installation of that version (simply replace \"stable\" with a tag of your chosing): pipx run --spec \"git+https://github.com/fgcz/bfabricPy.git@stable\" bfabric_read.py --help If you want to add it to a pyproject.toml the syntax for specifying a git dependency is as follows: [project] dependencies = [ \"bfabricPy @ git+https://github.com/fgcz/bfabricPy.git@stable\" ]","title":"Installation"},{"location":"#configuration","text":"Create a file as follows: (note: the password is not your login password, but the web service password available on your profile page) # ~/.bfabricpy.yml GENERAL: default_config: PRODUCTION PRODUCTION: login: yourBfabricLogin password: yourBfabricWebPassword base_url: https://fgcz-bfabric.uzh.ch/bfabric You can also include an additional config for the TEST instance TEST: login: yourBfabricLogin password: yourBfabricWebPassword base_url: https://fgcz-bfabric-test.uzh.ch/bfabric","title":"Configuration"},{"location":"changelog/","text":"Changelog The format is based on Keep a Changelog . Versioning currently follows X.Y.Z where X is used for major changes, that contain breaking changes Y should be the current bfabric release Z is increased for feature releases, that should not break the API [tba] - tba Added The Bfabric instance is now pickleable. Entities mapping: More types and relationships Relationships defer imports to descriptor call, i.e. circular relationships are possible now. Add Entity.id and Entity.web_url properties. HasOne and HasMany allow defining optional=True to indicate fields which can be missing under some circumstances. [1.13.4] - 2024-08-05 Added Add Workunit , Parameter , and Resource entities. Add concept of has_many and has_one relationships to entities. bfabric_slurm_queue_status.py to quickly check slurm queue status. Bfabric.save provides method which can be set to checkandinsert for specific use cases. Changed Most messages are now logged to debug level. The old verbose version information is now always logged, to INFO level, since it could entail useful information for error reporting. [1.13.3] - 2024-07-18 Added Flask New endpoint GET /config/remote_base_url for testing Changed Flask Simplify logging by using loguru only. Simplified setup logic since the production use case should use a WSGI server. Fixed bfabric_save_csv2dataset.py had an undeclared dependency on numpy and a few bugs which was improved. [1.13.2] - 2024-07-11 Added Add bfabric.entities.Dataset to easily read datasets. Pydantic-based configuration parsing The config format did not change. The code is easier to maintain now. Additionally, there is a lot more validation of the configuration file now, that should catch errors early. Make host and port configurable in bfabric_flask.py (currently only dev mode). [1.13.1] - 2024-07-02 Changed bfabric_save_csv2dataset will raise an error if problematic characters are found in any of the cells Correctly define bfabric_setWorkunitStatus_available.py , and processing and failed variants. Added Add loguru for future logging refactoring. Easily runnable tests with nox and standardized formatting using pre-commit . Removed Pandas is no longer a dependency, and has been replaced by polars. [1.13.0] - 2024-05-24 This is a major release refactoring bfabricPy's API. Changed The Bfabric class operations now return ResultContainer objects. These provide a list-like interface to access individual items or iterate over them. Individual items are a dictionary, potentially nested, and not specific to suds/zeep anymore. Convenience conversions, e.g. to a polars DataFrame, can be provided there. Configuration is now defined in ~/.bfabricpy.yml and supports multiple configurations, which can be selected by the BFABRICPY_CONFIG_ENV environment variable. Please consult the README for an example configuration. Use pyproject.toml for package configuration. Scripts have been refactored on a case-by-case basis. Added Zeep can be used instead of suds for SOAP communication. Bfabric can be instantiated without authentication, that can be provided later. This is useful in a server setup. Pagination support in Bfabric , specify the number of max_results and a potential offset. Pages handling is abstracted away. Detect errors in responses, e.g. invalid login. Removed Several old scripts have been moved into a deprecated_scripts folder. Wrapper creator related code is currently not updated but has been extracted into a dedicated folder wrapper_creator as well.","title":"Changelog"},{"location":"changelog/#changelog","text":"The format is based on Keep a Changelog . Versioning currently follows X.Y.Z where X is used for major changes, that contain breaking changes Y should be the current bfabric release Z is increased for feature releases, that should not break the API","title":"Changelog"},{"location":"changelog/#tba-tba","text":"","title":"[tba] - tba"},{"location":"changelog/#added","text":"The Bfabric instance is now pickleable. Entities mapping: More types and relationships Relationships defer imports to descriptor call, i.e. circular relationships are possible now. Add Entity.id and Entity.web_url properties. HasOne and HasMany allow defining optional=True to indicate fields which can be missing under some circumstances.","title":"Added"},{"location":"changelog/#1134-2024-08-05","text":"","title":"[1.13.4] - 2024-08-05"},{"location":"changelog/#added_1","text":"Add Workunit , Parameter , and Resource entities. Add concept of has_many and has_one relationships to entities. bfabric_slurm_queue_status.py to quickly check slurm queue status. Bfabric.save provides method which can be set to checkandinsert for specific use cases.","title":"Added"},{"location":"changelog/#changed","text":"Most messages are now logged to debug level. The old verbose version information is now always logged, to INFO level, since it could entail useful information for error reporting.","title":"Changed"},{"location":"changelog/#1133-2024-07-18","text":"","title":"[1.13.3] - 2024-07-18"},{"location":"changelog/#added_2","text":"Flask New endpoint GET /config/remote_base_url for testing","title":"Added"},{"location":"changelog/#changed_1","text":"Flask Simplify logging by using loguru only. Simplified setup logic since the production use case should use a WSGI server.","title":"Changed"},{"location":"changelog/#fixed","text":"bfabric_save_csv2dataset.py had an undeclared dependency on numpy and a few bugs which was improved.","title":"Fixed"},{"location":"changelog/#1132-2024-07-11","text":"","title":"[1.13.2] - 2024-07-11"},{"location":"changelog/#added_3","text":"Add bfabric.entities.Dataset to easily read datasets. Pydantic-based configuration parsing The config format did not change. The code is easier to maintain now. Additionally, there is a lot more validation of the configuration file now, that should catch errors early. Make host and port configurable in bfabric_flask.py (currently only dev mode).","title":"Added"},{"location":"changelog/#1131-2024-07-02","text":"","title":"[1.13.1] - 2024-07-02"},{"location":"changelog/#changed_2","text":"bfabric_save_csv2dataset will raise an error if problematic characters are found in any of the cells Correctly define bfabric_setWorkunitStatus_available.py , and processing and failed variants.","title":"Changed"},{"location":"changelog/#added_4","text":"Add loguru for future logging refactoring. Easily runnable tests with nox and standardized formatting using pre-commit .","title":"Added"},{"location":"changelog/#removed","text":"Pandas is no longer a dependency, and has been replaced by polars.","title":"Removed"},{"location":"changelog/#1130-2024-05-24","text":"This is a major release refactoring bfabricPy's API.","title":"[1.13.0] - 2024-05-24"},{"location":"changelog/#changed_3","text":"The Bfabric class operations now return ResultContainer objects. These provide a list-like interface to access individual items or iterate over them. Individual items are a dictionary, potentially nested, and not specific to suds/zeep anymore. Convenience conversions, e.g. to a polars DataFrame, can be provided there. Configuration is now defined in ~/.bfabricpy.yml and supports multiple configurations, which can be selected by the BFABRICPY_CONFIG_ENV environment variable. Please consult the README for an example configuration. Use pyproject.toml for package configuration. Scripts have been refactored on a case-by-case basis.","title":"Changed"},{"location":"changelog/#added_5","text":"Zeep can be used instead of suds for SOAP communication. Bfabric can be instantiated without authentication, that can be provided later. This is useful in a server setup. Pagination support in Bfabric , specify the number of max_results and a potential offset. Pages handling is abstracted away. Detect errors in responses, e.g. invalid login.","title":"Added"},{"location":"changelog/#removed_1","text":"Several old scripts have been moved into a deprecated_scripts folder. Wrapper creator related code is currently not updated but has been extracted into a dedicated folder wrapper_creator as well.","title":"Removed"},{"location":"contribute/","text":"Contribute This page describes some information relevant for contruibuting to bfabricPy. Development install You should install the dev group as it contains some extra packages for running the tests. pip install -e \".[dev]\" Running tests With nox and uv installed, it is as simple as running nox in the project root without any arguments. Integration tests Note that integration tests have been moved to a separate repository. Please contact us if you are interested. Documentation We currently do not have a versioning solution for the documentation, but we can add that later once it is more mature. # To preview while you write it mkdocs serve # To publish after changes mkdocs gh-deploy","title":"Contribute"},{"location":"contribute/#contribute","text":"This page describes some information relevant for contruibuting to bfabricPy.","title":"Contribute"},{"location":"contribute/#development-install","text":"You should install the dev group as it contains some extra packages for running the tests. pip install -e \".[dev]\"","title":"Development install"},{"location":"contribute/#running-tests","text":"With nox and uv installed, it is as simple as running nox in the project root without any arguments.","title":"Running tests"},{"location":"contribute/#integration-tests","text":"Note that integration tests have been moved to a separate repository. Please contact us if you are interested.","title":"Integration tests"},{"location":"contribute/#documentation","text":"We currently do not have a versioning solution for the documentation, but we can add that later once it is more mature. # To preview while you write it mkdocs serve # To publish after changes mkdocs gh-deploy","title":"Documentation"},{"location":"entities/","text":"High-level bfabric.entities API The bfabric.entities module offers a high-level, read-only API for retrieval of entities in the B-Fabric system. This API is designed to simplify entity access by providing lazy-loading capabilities for associated entities. Entities within this module can maintain a reference to a B-Fabric client instance, enabling seamless integration and data retrieval. Key Features Read-Only Access : This module is strictly for read-only operations. None of the classes or methods should be used to modify the database. Lazy-Loading : Entities are initialized with basic data as returned by a .read operation on its endpoint. However, associated entities are not loaded until explicitly requested, enhancing performance and reducing unnecessary data processing. Modular Design : Only include generic functionality within this module. Avoid adding highly specific logic to ensure the module remains maintainable over time. No Circular Imports : Ensure there are no circular dependencies between entities by deferring imports of other entities inside modules until all relevant modules are processed. Entity Each entity has to provide the name of its B-Fabric entity classname as ENDPOINT . An entity is defined uniquely by its classname and id . Entities are initialized with the full result structure obtained from a read operation on its particular endpoint. A return_id_only result is generally not supposed to be used to initialize an entity instance and behavior is undefined as of now. In cases where it makes sense to operate on the ids, it's better to directly call the Bfabric client methods. Entities can be retrieved with the methods Entity.find and Entity.find_all , whenever loading multiple entities of the same type the latter should be preferred since it reduces the number of API calls and returns a dictionary mapping entity ID to instance. Relationships Custom descriptors are available which are used to represent relationships and enable lazy-loading of data. Currently the following descriptors are available: HasOne : Defines a one-to-one relationship between entities. HasMany : Defines a one-to-many relationship between entities. Both support setting an additional argument optional=True which will ensure None (in the case of HasOne ) and an empty collection (in the case of HasMany ) are returned when there is no field at all in the result returned by the API.","title":"Entities"},{"location":"entities/#high-level-bfabricentities-api","text":"The bfabric.entities module offers a high-level, read-only API for retrieval of entities in the B-Fabric system. This API is designed to simplify entity access by providing lazy-loading capabilities for associated entities. Entities within this module can maintain a reference to a B-Fabric client instance, enabling seamless integration and data retrieval.","title":"High-level bfabric.entities API"},{"location":"entities/#key-features","text":"Read-Only Access : This module is strictly for read-only operations. None of the classes or methods should be used to modify the database. Lazy-Loading : Entities are initialized with basic data as returned by a .read operation on its endpoint. However, associated entities are not loaded until explicitly requested, enhancing performance and reducing unnecessary data processing. Modular Design : Only include generic functionality within this module. Avoid adding highly specific logic to ensure the module remains maintainable over time. No Circular Imports : Ensure there are no circular dependencies between entities by deferring imports of other entities inside modules until all relevant modules are processed.","title":"Key Features"},{"location":"entities/#entity","text":"Each entity has to provide the name of its B-Fabric entity classname as ENDPOINT . An entity is defined uniquely by its classname and id . Entities are initialized with the full result structure obtained from a read operation on its particular endpoint. A return_id_only result is generally not supposed to be used to initialize an entity instance and behavior is undefined as of now. In cases where it makes sense to operate on the ids, it's better to directly call the Bfabric client methods. Entities can be retrieved with the methods Entity.find and Entity.find_all , whenever loading multiple entities of the same type the latter should be preferred since it reduces the number of API calls and returns a dictionary mapping entity ID to instance.","title":"Entity"},{"location":"entities/#relationships","text":"Custom descriptors are available which are used to represent relationships and enable lazy-loading of data. Currently the following descriptors are available: HasOne : Defines a one-to-one relationship between entities. HasMany : Defines a one-to-many relationship between entities. Both support setting an additional argument optional=True which will ensure None (in the case of HasOne ) and an empty collection (in the case of HasMany ) are returned when there is no field at all in the result returned by the API.","title":"Relationships"}]}